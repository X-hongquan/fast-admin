import{h as g,i as L,H as ae,r as u,o as s,c as S,b as U,a as e,w as l,e as d,C as m,I as M,F as O,k as $,d as te,R as ne,S as oe,U as de,B as ue,V as ie,W as se,X as re,Y as pe}from"./index-C5uf1WvN.js";import{h as fe}from"./confirm-CxKUQBJO.js";import{u as ce,a as me,d as _e}from"./notification-DhcrVVnz.js";const be={class:"content-box"},ve={class:"search-box"},ge={class:"operation-box"},Ve={class:"pagination-box"},ye={class:"dialog-footer"},we={__name:"index",setup(ke){let F=Object.keys(ne);const P=g([]),r=L({pageNum:1,pageSize:10,roleId:void 0,status:void 0});function R(){r.status=void 0,r.roleId=void 0}const c=g(!1),k=g(""),q=g([]),n=L({id:void 0,name:void 0,parentId:void 0,component:void 0,url:void 0,sort:void 0,title:void 0,level:void 0,type:void 0,icon:void 0,status:void 0,redirect:void 0,link:void 0}),A=g(0),x=g([]),V=g(!1);async function H(o){x.value=o}async function _(){const o=await oe(r);if(o.code===200){q.value=o.data;const{arr:t}=de(o.data);P.value=t,A.value=Number(o.total)}}function B(o){fe(async()=>{const t=await pe(o);_e(t,()=>{_()})})}function T(o){B([o.id])}function W(){x.value.length>0?B(x.value.map(o=>o.id)):ue.error("请选择要删除的数据")}function X(o){r.pageNum=1,_()}function Y(o){_()}function w(){Object.keys(n).forEach(o=>n[o]=void 0),V.value=!1,n.status=1,n.parentId=0}function G(){w(),c.value=!0,k.value="新增菜单"}function J(o){w(),c.value=!0,k.value="新增菜单",n.parentId=o.id,V.value=!0,n.level=o.level+1}async function K(o){w(),c.value=!0,k.value="编辑菜单";const t=await ie(o.id);Object.assign(n,t.data)}async function Q(){if(n.id){const o=await se(n);ce(o,()=>{_(),c.value=!1})}else{const o=await re(n);me(o,()=>{_(),c.value=!1})}}return ae(()=>{_()}),(o,t)=>{const y=u("el-option"),z=u("el-select"),i=u("el-form-item"),D=u("el-form"),f=u("el-button"),p=u("el-table-column"),I=u("el-tag"),h=u("el-icon"),Z=u("el-table"),ee=u("el-pagination"),b=u("el-input"),C=u("el-col"),E=u("el-row"),v=u("el-radio"),N=u("el-radio-group"),le=u("el-dialog");return s(),S("div",be,[U("div",ve,[e(D,{inline:""},{default:l(()=>[e(i,{label:"状态",prop:"status",class:"input-width"},{default:l(()=>[e(z,{modelValue:r.status,"onUpdate:modelValue":t[0]||(t[0]=a=>r.status=a),placeholder:"请选择状态",clearable:""},{default:l(()=>[e(y,{label:"启用",value:1}),e(y,{label:"禁用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),U("div",ge,[e(f,{icon:"Search",onClick:_},{default:l(()=>[d("查询")]),_:1}),e(f,{type:"info",icon:"Refresh",onClick:R},{default:l(()=>[d("重置")]),_:1}),e(f,{type:"primary",icon:"Plus",onClick:G},{default:l(()=>[d("新增")]),_:1}),e(f,{type:"danger",icon:"Delete",onClick:W},{default:l(()=>[d("批量删除")]),_:1})]),e(Z,{data:P.value,onSelectionChange:H,"row-key":"id"},{default:l(()=>[e(p,{type:"selection",width:"55"}),e(p,{label:"序号",type:"index",width:"80"}),e(p,{label:"标题",prop:"title"}),e(p,{label:"类型",prop:"type"},{default:l(({row:a})=>[a.type===0?(s(),m(I,{key:0,type:"success"},{default:l(()=>[d("目录")]),_:1})):a.type===1?(s(),m(I,{key:1,type:"danger"},{default:l(()=>[d("菜单")]),_:1})):(s(),m(I,{key:2,type:"warning"},{default:l(()=>[d("其他")]),_:1}))]),_:1}),e(p,{label:"路径",prop:"url"}),e(p,{label:"组件",prop:"component"}),e(p,{prop:"createBy",label:"创建人"}),e(p,{prop:"createTime",label:"创建时间"}),e(p,{label:"图标",prop:"icon"},{default:l(({row:a})=>[e(h,{size:"large"},{default:l(()=>[(s(),m(M(a.icon)))]),_:2},1024)]),_:1}),e(p,{label:"操作",width:"300"},{default:l(({row:a})=>[e(f,{type:"text",icon:"Plus",onClick:j=>J(a)},{default:l(()=>[d("新增菜单")]),_:2},1032,["onClick"]),e(f,{type:"text",icon:"Edit",onClick:j=>K(a)},{default:l(()=>[d("编辑")]),_:2},1032,["onClick"]),e(f,{type:"text",icon:"Delete",onClick:j=>T(a)},{default:l(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),U("div",Ve,[e(ee,{"current-page":r.pageNum,"onUpdate:currentPage":t[1]||(t[1]=a=>r.pageNum=a),"page-size":r.pageSize,"onUpdate:pageSize":t[2]||(t[2]=a=>r.pageSize=a),"page-sizes":[10,20,50,100],layout:"prev, pager, next,jumper,->, sizes,total",total:A.value,background:"",onSizeChange:X,onCurrentChange:Y},null,8,["current-page","page-size","total"])]),e(le,{modelValue:c.value,"onUpdate:modelValue":t[16]||(t[16]=a=>c.value=a),title:k.value},{footer:l(()=>[U("span",ye,[e(f,{onClick:t[15]||(t[15]=a=>c.value=!1)},{default:l(()=>[d("取 消")]),_:1}),e(f,{type:"primary",onClick:Q},{default:l(()=>[d("确 定")]),_:1})])]),default:l(()=>[e(D,{model:n,"label-width":"80px"},{default:l(()=>[e(E,{gutter:"30"},{default:l(()=>[e(C,{span:12},{default:l(()=>[e(i,{label:"标题",prop:"title",required:""},{default:l(()=>[e(b,{modelValue:n.title,"onUpdate:modelValue":t[3]||(t[3]=a=>n.title=a),placeholder:"请输入标题"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:"12"},{default:l(()=>[e(i,{label:"父级菜单",required:""},{default:l(()=>[e(z,{modelValue:n.parentId,"onUpdate:modelValue":t[4]||(t[4]=a=>n.parentId=a),placeholder:"请选择父级菜单",disabled:V.value,class:"input-width"},{default:l(()=>[e(y,{label:"根目录",value:0}),(s(!0),S(O,null,$(q.value,a=>(s(),m(y,{key:a.id,label:a.title,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1}),e(i,{label:"类型"},{default:l(()=>[e(N,{modelValue:n.link,"onUpdate:modelValue":t[5]||(t[5]=a=>n.link=a)},{default:l(()=>[e(v,{label:0},{default:l(()=>[d("非外链")]),_:1}),e(v,{label:1},{default:l(()=>[d("外链")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(E,{gutter:"30"},{default:l(()=>[e(C,{span:12},{default:l(()=>[e(i,{label:"组件"},{default:l(()=>[e(b,{modelValue:n.component,"onUpdate:modelValue":t[6]||(t[6]=a=>n.component=a),placeholder:"请输入组件路径"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:l(()=>[e(i,{label:"路由名称",required:""},{default:l(()=>[e(b,{modelValue:n.name,"onUpdate:modelValue":t[7]||(t[7]=a=>n.name=a),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(i,{label:"路径",required:""},{default:l(()=>[e(b,{modelValue:n.url,"onUpdate:modelValue":t[8]||(t[8]=a=>n.url=a),placeholder:"请输入路径"},null,8,["modelValue"])]),_:1}),e(i,{label:"层级",required:""},{default:l(()=>[e(b,{modelValue:n.level,"onUpdate:modelValue":t[9]||(t[9]=a=>n.level=a),placeholder:"请输入层级",disabled:V.value},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"排序"},{default:l(()=>[e(b,{modelValue:n.sort,"onUpdate:modelValue":t[10]||(t[10]=a=>n.sort=a),placeholder:"请输入排序",disabled:V.value},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"重定向"},{default:l(()=>[e(b,{modelValue:n.redirect,"onUpdate:modelValue":t[11]||(t[11]=a=>n.redirect=a),placeholder:"请输入重定向路径"},null,8,["modelValue"])]),_:1}),e(i,{label:"状态"},{default:l(()=>[e(N,{modelValue:n.status,"onUpdate:modelValue":t[12]||(t[12]=a=>n.status=a)},{default:l(()=>[e(v,{label:1},{default:l(()=>[d("启用")]),_:1}),e(v,{label:0},{default:l(()=>[d("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"类型"},{default:l(()=>[e(N,{modelValue:n.type,"onUpdate:modelValue":t[13]||(t[13]=a=>n.type=a)},{default:l(()=>[e(v,{label:0},{default:l(()=>[d("目录")]),_:1}),e(v,{label:1},{default:l(()=>[d("菜单")]),_:1}),e(v,{label:2},{default:l(()=>[d("其他")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"图标"},{default:l(()=>[e(z,{modelValue:n.icon,"onUpdate:modelValue":t[14]||(t[14]=a=>n.icon=a),placeholder:"请选择图标",size:"large",style:{width:"200px"}},{default:l(()=>[(s(!0),S(O,null,$(te(F),a=>(s(),m(y,{key:a,label:a,value:a},{default:l(()=>[e(h,{size:"large"},{default:l(()=>[(s(),m(M(a)))]),_:2},1024)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"]),e(h,{style:{"font-size":"40px"}},{default:l(()=>[(s(),m(M(n.icon)))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}};export{we as default};
