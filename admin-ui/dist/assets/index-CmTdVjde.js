import{D as _,h as f,i as V,H as L,r as u,o as T,c as G,b as v,a as e,w as t,e as r,B as J}from"./index-DE-Bqmei.js";import{h as K}from"./confirm-DvTXX-uq.js";import{u as Q,a as W,d as X}from"./notification-DtEfQLwF.js";function Y(i){return _({url:"/dept/list",method:"get",params:i})}function Z(i){return _({url:"/dept/{id}",method:"get",params:i})}function ee(i){return _({url:"/dept",method:"post",data:i})}function te(i){return _({url:"/dept",method:"put",data:i})}function ae(i){return _({url:"/dept/{ids}",method:"delete",params:i})}const ne={class:"content-box"},le={class:"search-box"},oe={class:"operation-box"},de={class:"pagination-box"},ie={class:"dialog-footer"},pe={__name:"index",setup(i){const w=f([]),o=V({pageNum:1,pageSize:10,id:void 0,name:void 0,status:void 0});function S(){o.id=void 0,o.name=void 0,o.status=void 0}const y=f(0),d=V({id:void 0,name:void 0,status:void 0}),h=f([]);function P(a){h.value=a}const k=f(null),U=V({name:[{required:!0,message:"部门名称不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]});function x(a){K(async()=>{const n=await ae(a);X(n,()=>{c()})})}function A(a){x(a.id)}function B(){h.value.length>0?x(h.value.map(a=>a.id)):J.error("请选择要删除的数据")}function I(a){o.pageNum=1,c()}function q(a){c()}const C=f(""),p=f(!1);function D(){d.id=void 0,d.name=void 0,d.status=void 0}function E(){D(),p.value=!0,C.value="新增部门"}async function R(a){D(),p.value=!0,C.value="编辑部门";const n=await Z(a.id);Object.assign(d,n.data)}async function $(){if(await k.value.validate(),d.id){const a=await te(d);Q(a,()=>{c(),p.value=!1})}else{const a=await ee(d);W(a,()=>{c(),p.value=!1})}}async function c(){const a=await Y(o);a.code===200&&(w.value=a.data,y.value=Number(a.total))}return L(()=>{c()}),(a,n)=>{const g=u("el-input"),b=u("el-form-item"),N=u("el-form"),s=u("el-button"),m=u("el-table-column"),j=u("el-table"),M=u("el-pagination"),z=u("el-col"),O=u("el-row"),F=u("el-dialog");return T(),G("div",ne,[v("div",le,[e(N,{inline:""},{default:t(()=>[e(b,{label:"部门名称"},{default:t(()=>[e(g,{modelValue:o.name,"onUpdate:modelValue":n[0]||(n[0]=l=>o.name=l),placeholder:"请输入name",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1}),e(b,{label:"状态"},{default:t(()=>[e(g,{modelValue:o.status,"onUpdate:modelValue":n[1]||(n[1]=l=>o.status=l),placeholder:"请输入status",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1})]),v("div",oe,[e(s,{icon:"Search",onClick:c},{default:t(()=>[r("查询")]),_:1}),e(s,{type:"primary",icon:"Plus",onClick:E},{default:t(()=>[r("新增")]),_:1}),e(s,{type:"info",icon:"refresh",onClick:S},{default:t(()=>[r("重置")]),_:1}),e(s,{type:"danger",icon:"Delete",onClick:B},{default:t(()=>[r("删除")]),_:1})]),e(j,{data:w.value,onSelectionChange:P},{default:t(()=>[e(m,{type:"selection",width:"55"}),e(m,{label:"序号",type:"index",width:"80"}),e(m,{label:"",prop:"id"}),e(m,{label:"部门名称",prop:"name"}),e(m,{label:"状态",prop:"status"}),e(m,{label:"操作",width:"300"},{default:t(({row:l})=>[e(s,{type:"primary",icon:"Edit",onClick:H=>R(l)},{default:t(()=>[r("编辑")]),_:2},1032,["onClick"]),e(s,{type:"danger",icon:"Delete",onClick:H=>A(l)},{default:t(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",de,[e(M,{"current-page":o.pageNum,"onUpdate:currentPage":n[2]||(n[2]=l=>o.pageNum=l),"page-size":o.pageSize,"onUpdate:pageSize":n[3]||(n[3]=l=>o.pageSize=l),"page-sizes":[10,20,50,100],layout:"prev, pager, next,jumper,->, sizes,total",total:y.value,background:"",onSizeChange:I,onCurrentChange:q},null,8,["current-page","page-size","total"])]),e(F,{modelValue:p.value,"onUpdate:modelValue":n[7]||(n[7]=l=>p.value=l),title:C.value},{footer:t(()=>[v("span",ie,[e(s,{onClick:n[6]||(n[6]=l=>p.value=!1)},{default:t(()=>[r("取 消")]),_:1}),e(s,{type:"primary",onClick:$},{default:t(()=>[r("确 定")]),_:1})])]),default:t(()=>[e(N,{model:d,rules:U,"label-width":"80px",ref_key:"formRef",ref:k},{default:t(()=>[e(O,{gutter:30},{default:t(()=>[e(z,{span:12},{default:t(()=>[e(b,{label:"部门名称",prop:"name"},{default:t(()=>[e(g,{modelValue:d.name,"onUpdate:modelValue":n[4]||(n[4]=l=>d.name=l),placeholder:"请输入部门名称",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1}),e(z,{span:12},{default:t(()=>[e(b,{label:"状态",prop:"status"},{default:t(()=>[e(g,{modelValue:d.status,"onUpdate:modelValue":n[5]||(n[5]=l=>d.status=l),placeholder:"请输入状态",clearable:"",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}}};export{pe as default};
