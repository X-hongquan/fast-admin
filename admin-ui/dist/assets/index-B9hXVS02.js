import{D as B,_ as O,h,i as C,H as R,r as d,o as y,c as D,b as i,a as e,w as l,e as c,t as r,C as V,F as J}from"./index-C5uf1WvN.js";import{C as v}from"./index-Bh36dChg.js";function E(T){return B({url:"/log/list",method:"get",params:T})}const F={class:"content-box"},I={class:"search-box"},A={class:"operation-box"},H={class:"pagination-box"},$={class:"my-h"},G={class:"my-h"},K={class:"my-h"},Q={class:"my-h"},W={class:"my-h"},X={class:"my-h"},Y={class:"my-h"},Z={__name:"index",setup(T){const N=h([]),n=C({pageNum:1,pageSize:10,status:void 0,businessType:void 0,requestMethod:void 0}),k=h(0),b=h(!1);function L(){for(const u in n)n[u]=void 0;n.pageNum=1,n.pageSize=10,_()}async function _(){const u=await E(n);if(u.code===200){const t=u.data;t.forEach(o=>{switch(o.businessType){case 0:o.businessTypeLabel="其他";break;case 1:o.businessTypeLabel="新增";break;case 2:o.businessTypeLabel="修改";break;case 3:o.businessTypeLabel="删除";break;case 4:o.businessTypeLabel="授权";break}}),N.value=t,k.value=Number(u.total)}}function S(u){n.pageNum=1,_()}function z(u){_()}const s=C({title:void 0,operationParam:void 0,jsonResult:void 0,costTime:void 0,method:void 0,requestMethod:void 0,operationTime:void 0,operationName:void 0,businessType:void 0,businessTypeLabel:void 0,status:void 0,errorMsg:void 0});function q(u){const t={...u};t.operationParam=JSON.stringify(JSON.parse(u.operationParam),null,2),t.jsonResult=JSON.stringify(JSON.parse(u.jsonResult),null,2),Object.assign(s,t),b.value=!0}return R(()=>{_()}),(u,t)=>{const o=d("el-option"),x=d("el-select"),f=d("el-form-item"),M=d("el-input"),w=d("el-form"),g=d("el-button"),p=d("el-table-column"),m=d("el-tag"),j=d("el-table"),P=d("el-pagination"),U=d("el-dialog");return y(),D(J,null,[i("div",F,[i("div",I,[e(w,{inline:""},{default:l(()=>[e(f,{label:"状态"},{default:l(()=>[e(x,{modelValue:n.status,"onUpdate:modelValue":t[0]||(t[0]=a=>n.status=a),placeholder:"请选择",class:"input-width",clearable:""},{default:l(()=>[e(o,{label:"成功",value:0}),e(o,{label:"失败",value:1})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"操作类型"},{default:l(()=>[e(x,{modelValue:n.businessType,"onUpdate:modelValue":t[1]||(t[1]=a=>n.businessType=a),placeholder:"请选择",class:"input-width",clearable:""},{default:l(()=>[e(o,{label:"其他",value:0}),e(o,{label:"新增",value:1}),e(o,{label:"修改",value:2}),e(o,{label:"删除",value:3}),e(o,{label:"授权",value:4})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"方法名"},{default:l(()=>[e(M,{modelValue:n.requestMethod,"onUpdate:modelValue":t[2]||(t[2]=a=>n.requestMethod=a),placeholder:"请输入",class:"input-width"},null,8,["modelValue"])]),_:1})]),_:1})]),i("div",A,[e(g,{icon:"Search",onClick:_},{default:l(()=>[c("查询")]),_:1}),e(g,{type:"primary",onClick:L},{default:l(()=>[c("重置")]),_:1})]),e(j,{data:N.value},{default:l(()=>[e(p,{type:"index",width:"50"}),e(p,{label:"标题",prop:"title"}),e(p,{label:"方法名",prop:"method",width:"400"}),e(p,{label:"操作类型",prop:"businessTypeLabel"},{default:l(({row:a})=>[e(m,null,{default:l(()=>[c(r(a.businessTypeLabel),1)]),_:2},1024)]),_:1}),e(p,{label:"请求方法",prop:"requestMethod"}),e(p,{label:"状态",prop:"status"},{default:l(({row:a})=>[a.status===0?(y(),V(m,{key:0},{default:l(()=>[c("成功")]),_:1})):(y(),V(m,{key:1,type:"danger"},{default:l(()=>[c("失败")]),_:1}))]),_:1}),e(p,{label:"操作人",prop:"operationName"},{default:l(({row:a})=>[e(m,null,{default:l(()=>[c(r(a.operationName),1)]),_:2},1024)]),_:1}),e(p,{label:"操作时间",prop:"operationTime"}),e(p,{label:"操作",width:"100"},{default:l(({row:a})=>[e(g,{type:"text",onClick:ee=>q(a)},{default:l(()=>[c("详细")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),i("div",H,[e(P,{"current-page":n.pageNum,"onUpdate:currentPage":t[3]||(t[3]=a=>n.pageNum=a),"page-size":n.pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>n.pageSize=a),"page-sizes":[10,20,50,100],layout:"prev, pager, next,jumper,->, sizes,total",total:k.value,background:"",onSizeChange:S,onCurrentChange:z},null,8,["current-page","page-size","total"])]),e(U,{title:s.title,modelValue:b.value,"onUpdate:modelValue":t[5]||(t[5]=a=>b.value=a)},{default:l(()=>[i("p",$,"方法名: "+r(s.method),1),i("p",G,"花费时间: "+r(s.costTime)+"ms",1),i("p",K,"请求方式: "+r(s.requestMethod),1),i("p",Q,"操作人: "+r(s.operationName),1),i("p",W,"操作时间: "+r(s.operationTime),1),i("p",X,"操作类型: "+r(s.businessTypeLabel),1),i("p",Y,"状态: "+r(s.status===0?"成功":"失败"),1),e(v,{data:s.operationParam,header:"请求参数"},null,8,["data"]),e(v,{data:s.jsonResult,header:"相应数据"},null,8,["data"]),e(v,{data:s.errorMsg,header:"异常信息"},null,8,["data"])]),_:1},8,["title","modelValue"])],64)}}},le=O(Z,[["__scopeId","data-v-d3619a35"]]);export{le as default};
