import{c as L,f as Y}from"./job-BigLhOrX.js";import{h as H}from"./confirm-DvTXX-uq.js";import{d as J}from"./notification-DtEfQLwF.js";import{h as m,i as M,G as P,H as q,r as o,o as b,c as A,b as _,a as e,w as n,e as c,C as S}from"./index-DE-Bqmei.js";const E={class:"content-box"},G={class:"search-box"},R={class:"block"},X={class:"operation-box"},F={class:"pagination-box"},$={__name:"log",setup(K){const g=m([]),i=m([]),t=M({pageNum:1,pageSize:10,jobId:void 0,jobName:void 0,handleTime:void 0,handleStatus:void 0}),h=m(0);function V(){t.jobId=void 0,t.jobName=void 0,t.handleStatus=void 0,t.handleTime=void 0,t.endTime=void 0,t.startTime=void 0,i.value=[]}async function u(){if(i.value.length==2)for(let a=0;a<i.value.length;a++)t.startTime=i.value[0],t.endTime=i.value[1];const d=await L(t);d.code===200&&(g.value=d.data,h.value=Number(d.total))}const v=m([]);function y(d){v.value=d}function k(){H(async()=>{const d=v.value.map(r=>r.id),a=await Y(d);J(a,()=>{u()})})}function T(){}function j(d){t.pageNum=1,u()}function x(d){u()}const z=P();return t.jobName=z.query.jobName,q(()=>{u()}),(d,a)=>{const r=o("el-input"),p=o("el-form-item"),C=o("el-option"),w=o("el-select"),I=o("el-date-picker"),U=o("el-form"),f=o("el-button"),s=o("el-table-column"),N=o("el-tag"),D=o("el-table"),B=o("el-pagination");return b(),A("div",E,[_("div",G,[e(U,{inline:""},{default:n(()=>[e(p,{label:"任务名称"},{default:n(()=>[e(r,{modelValue:t.jobName,"onUpdate:modelValue":a[0]||(a[0]=l=>t.jobName=l),placeholder:"请输入任务名称",clearable:""},null,8,["modelValue"])]),_:1}),e(p,{label:"处理时间"},{default:n(()=>[e(r,{modelValue:t.handleTime,"onUpdate:modelValue":a[1]||(a[1]=l=>t.handleTime=l),type:"number",placeholder:"请输入时间大于X(ms)"},null,8,["modelValue"])]),_:1}),e(p,{label:"执行状态"},{default:n(()=>[e(w,{modelValue:t.handleStatus,"onUpdate:modelValue":a[2]||(a[2]=l=>t.handleStatus=l),placeholder:"请选择触发状态",clearable:"",class:"input-width"},{default:n(()=>[e(C,{label:"成功",value:1}),e(C,{label:"失败",value:0})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"调度时间"},{default:n(()=>[_("div",R,[e(I,{modelValue:i.value,"onUpdate:modelValue":a[3]||(a[3]=l=>i.value=l),type:"datetimerange",onChange:T,"start-placeholder":"Start date","end-placeholder":"End date","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])]),_:1})]),_:1})]),_("div",X,[e(f,{icon:"Search",onClick:u},{default:n(()=>[c("查询")]),_:1}),e(f,{type:"info",icon:"refresh",onClick:V},{default:n(()=>[c("重置")]),_:1}),e(f,{type:"danger",icon:"Delete",onClick:k},{default:n(()=>[c("删除")]),_:1})]),e(D,{data:g.value,onSelectionChange:y},{default:n(()=>[e(s,{type:"selection",width:"55"}),e(s,{type:"index",label:"序号",width:"80"}),e(s,{prop:"jobName",label:"任务"}),e(s,{prop:"handleTime",label:"处理时间"}),e(s,{prop:"triggerTime",label:"调度时间"}),e(s,{prop:"handleStatus",label:"处理状态"},{default:n(({row:l})=>[l.handleStatus===0?(b(),S(N,{key:0,type:"info"},{default:n(()=>[c("失败")]),_:1})):(b(),S(N,{key:1,type:"success"},{default:n(()=>[c("成功")]),_:1}))]),_:1})]),_:1},8,["data"]),_("div",F,[e(B,{"current-page":t.pageNum,"onUpdate:currentPage":a[4]||(a[4]=l=>t.pageNum=l),"page-size":t.pageSize,"onUpdate:pageSize":a[5]||(a[5]=l=>t.pageSize=l),"page-sizes":[10,20,50,100],layout:"prev, pager, next,jumper,->, sizes,total",total:h.value,background:"",onSizeChange:j,onCurrentChange:x},null,8,["current-page","page-size","total"])])])}}};export{$ as default};
